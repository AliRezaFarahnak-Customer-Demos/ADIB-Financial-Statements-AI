---
name: OpenAI_query
description: A basic prompt using MistralAI for Chat page. It adds the tools that are used during the chat completion request.
model:
  api: chat
  configuration:
    type: openai
  parameters:
    max_tokens: 100
    temperature: 0.0
    tools: ${file:tools.json}
inputs:
  question:
    type: string
  few_shots:
    type: list
  past_messages:
    type: list
sample:
  question: What is included in my Northwind Health Plus plan that is not in standard?
  few_shots: [{"role": "user", "content": "What is the weather today"}, {"role": "assistant", "content": "It is sunny today"}]
  past_messages: [{"role": "user", "content": "What is the weather today"}, {"role": "assistant", "content": "It is sunny today"}]

---
user:
Below is a history of the conversation so far, and a new question asked by the user that needs to be answered by searching in a knowledge base.
You have access to Azure AI Search index with 100's of documents.
enerate a search query based on the conversation and the new question.
Do not include cited source filenames and document names e.g info.txt or doc.pdf in the search query terms.
Do not include any text inside [] or <<>> in the search query terms.
Do not include any special characters like '+'.
If the question is not in English, translate the question to English before generating the search query.
If you cannot generate a search query, return just the number 0.


{% if few_shots is defined and few_shots|length > 0 %}
{% for shot in few_shots %}
{{ shot.role }}:
{{ shot.content }}
{% endfor %}
{% endif %}

{% if past_messages is defined and past_messages|length > 0 %}
Past conversation:
{% for old_question in past_messages %}
{{ old_question.role }}:
{{ old_question.content }}
{% endfor %}
{% endif %}

user:
{{ question }}
